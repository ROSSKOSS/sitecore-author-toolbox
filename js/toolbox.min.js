import*as e from"./modules/global.js";import{log as o,loadJsFile as r,getScItemData as i}from"./modules/helpers.js";import{initDarkMode as s,detectSwitchDarkMode as t}from"./modules/dark.js";import{addHelptextIcons as a}from"./modules/help.js";import{showSnackbar as n}from"./modules/snackbar.js";import{checkWorkbox as l}from"./modules/workbox.js";import{resumeFromWhereYouLeftOff as d,historyNavigation as g}from"./modules/history.js";import{checkNotificationPermissions as m,checkPublishNotification as u}from"./modules/notification.js";import{initFlagRibbonEE as c,initLanguageMenuEE as p,initLanguageMenuCE as f,initFlagsPublishingWindow as b,initFlagsPublish as E}from"./modules/language.js";import{initCharsCount as S,initCheckboxes as y,initDateTimeField as h,initPasswordField as j,refreshContentEditor as w,contentTreeScrollTo as P,keyEventListeners as x,resetContentEditor as L}from"./modules/contenteditor.js";import{initAppName as M,initGravatarImage as R,initUserMenu as v,initIntroScreen as k}from"./modules/users.js";import{initInstantSearch as D,enhancedSitecoreSearch as T}from"./modules/search.js";import{insertModal as B,insertPanel as I}from"./modules/insert.js";import{initMediaExplorer as W,initMediaCounter as A,initMediaDragDrop as C,initMediaViewButtons as q,initUploadButton as F,initUploader as U,initLightbox as z,initMediaSearchBox as G}from"./modules/media.js";import{initOnboarding as H,initExperimentalUi as V,initInsertIcon as N,initGutter as X,initSitecoreRibbon as J,initSvgAnimation as O,initSvgAnimationPublish as Q,initEventListeners as K,initTitleBarDesktop as Y,initMaterializeIcons as Z,insertSavebarEE as $}from"./modules/experimentalui.js";import{initFavorites as _}from"./modules/favorites.js";import{initGroupedErrors as ee}from"./modules/errors.js";import{enhancedBucketLists as eo}from"./modules/buckets.js";import{initRteTooltips as er,initSyntaxHighlighterRte as ei}from"./modules/rte.js";import{initPreviewButton as es,listenPreviewTab as et}from"./modules/preview.js";import{initLaunchpadIcon as ea,initLaunchpadMenu as en}from"./modules/launchpad.js";import{initAutoExpandTree as el,initTreeGutterTooltips as ed}from"./modules/contenttree.js";import{initQuerySuggestions as eg}from"./modules/template.js";import{initPublishingStatus as em}from"./modules/publishingdashboard.js";import{initPreviewButtonsEE as eu,updateEETitle as ec,storeCurrentPageEE as ep,addToolbarEditCE as ef,addToolbarTooltip as eb,addPlaceholderTooltip as eE,resetExperienceEditor as eS,initRenderingSearchBox as ey,initOptionalFields as eh,initGroupedErrorsEE as ej}from"./modules/experienceeditor.js";import{initHorizon as ew}from"./modules/horizon.js";import{initTabSections as eP}from"./modules/tabs.js";chrome.storage.sync.get(ex=>{if(!e.isSitecore||!e.isSitecoreJs||e.isEditMode||e.isLoginPage||e.isCss)L();else{if(o("Sitecore detected","red"),document.body&&document.body.classList.add("satExtension"),r("js/inject.js"),m(),u(ex),el(ex),x(),v(ex),s(ex),t(ex),e.isContentEditor){o("**** CE ****","yellow");let eL=i();ed(),w(ex),d(ex),D(ex),_(ex),g(),n(ex),P(),z(),k(),ex.feature_experimentalui&&(o("**** Experimental ****","yellow"),M(ex,"Content Editor"),O(ex),B(ex,eL.id,eL.language,eL.version),I(),N(ex),X(),J(),K(),Y(),H(),Z(ex))}if(e.isLaunchpad)o("**** Launchpad ****","orange"),ea(ex),l(ex),n(ex),k();else if(!e.isDesktop||e.isGalleryFavorites||e.isXmlControl){if(e.isUserManager)o("**** User Manager ****","orange"),M(ex,"User Manager");else if(e.isSecurityEditor)o("**** Security Editor ****","orange"),M(ex,"Security Editor");else if(e.isAccessViewer)o("**** Access Viewer ****","orange"),M(ex,"Access Viewer");else if(e.isDomainManager)o("**** Domain Manager ****","orange"),M(ex,"Domain Manager");else if(e.isRoleManager)o("**** Role Manager ****","orange"),M(ex,"Role Manager");else if(e.isPowerShellIse)o("**** PowerShell ISE ****","orange"),M(ex,"PowerShell ISE");else if(e.isPowerShellReports)o("**** PowerShell Reports ****","orange"),M(ex,"PowerShell Reports");else if(e.isRecycleBin)o("**** Recycle Bin ****","orange"),M(ex,"Recycle Bin");else if(e.isWorkbox)o("**** Workbox ****","orange"),M(ex,"Workbox");else if(e.isTemplateBuilder)o("**** Template Builder ****","orange"),M(ex,"Template Builder"),eg(ex);else if(e.isPublishDashboard)o("**** Publishing Dashboard ****","orange"),M(ex,"Publishing Dashboard"),em(ex);else{o("**** Non identified ****","green"),o(e.windowLocationHref,"green"),V(ex);let eM=document.querySelector("*[data-sc-id=HeaderTitle]");M(ex,eM=eM?eM.innerText:"")}}else o("**** Desktop Shell ****","orange"),M(ex,"Sitecore Desktop"),en(ex),l(ex),n(ex);e.isPreviewTab?(o("**** Preview tab ****","orange"),es(ex),et(ex)):e.isMediaFolder?(o("**** Media Folder ****","orange"),A(ex),C(ex),q(ex),W(ex),G(ex),Z(ex)):e.isFieldEditor?(o("**** Field editor ****","orange"),y(ex),h(ex),j(ex),S(ex),ee(ex),a(),eo(),Z(ex),eP(ex)):e.isExperienceProfile?(o("**** Experience Profile ****","orange"),R(ex)):e.isRichTextEditor||e.isHtmlEditor?(o("**** Rich Text Editor ****","orange"),er(ex),ei(ex)):e.isContentEditorApp&&ex.feature_experimentalui||e.isContentEditorApp&&ex.feature_instantsearch?(o("**** Content Editor App ****","orange"),document.querySelector("#globalLogo")&&document.querySelector("#globalLogo").setAttribute("target","_parent")):e.isSearch?(o("**** Internal Search ****","orange"),T(ex)):e.isGalleryLanguage?(o("**** Languages menu ****","orange"),f(ex)):e.isPublishDialog?(o("**** Publishing window ****","orange"),b(ex)):e.isPublishWindow||e.isInstallationWizard?(o("**** Publish / Rebuild / Package ****","orange"),y(ex),E(ex),Q(ex)):e.isExportSiteWizard?(o("**** Export Site Wizard ****","orange"),Q(ex)):e.isUploadPackage?(o("**** Upload Package ****","orange"),Q(ex)):e.isUserOptions?(o("**** User options ****","orange"),document.querySelectorAll(".scTabs > div > fieldset > div").forEach(function(e){"Quick info section"==e.innerText&&e.setAttribute("style","color:red; font-weight:bold"),"Item title bar"==e.innerText&&e.setAttribute("style","color:red; font-weight:bold")})):e.isEditorFolder?(o("**** Editors folder ****","orange"),Z(ex)):e.isGalleryVersion?o("**** Versions menu ****","orange"):e.isLayoutDetails?(o("**** Layout Details ****","orange"),Z(ex)):e.isDialog||e.isLockedItems?(o("**** Dialog UI ****","orange"),Z(ex),U()):e.isGalleryFavorites?(o("**** Favorites ****","orange"),Z(ex)):e.isMediaBrowser?(o("**** Media Browser ****","orange"),F(ex)):e.isSelectRendering&&!e.isSourceBrowser?(o("**** Select Rendering ****","orange"),M(ex,"Select Rendering"),ey(ex),Z(ex)):!e.isXmlControl||e.isRichText||e.isWorkbox?e.isSourceBrowser?o("**** Source Browser ****","orange"):e.isGalleryLinks&&o("**** Links menu ****","orange"):(o("**** XML Control (Window) ****","orange"),y(ex),eP(ex),h(ex),j(ex),Z(ex))}(e.isEditMode&&!e.isLoginPage||e.isPreviewMode&&!e.isLoginPage||e.isSitecoreModule&&!e.isLoginPage)&&(o("Experience Editor detected","red"),document.body&&document.body.classList.add("satExtension"),r("js/inject.js"),m(),u(ex),x(),c(ex),v(ex,"EE"),s(ex),t(ex),e.isRibbon?(o("**** EE Ribbon ****","orange"),document.querySelector("body").classList.add("satEEExperimentalUi"),J(),eu(ex),ep(),$(ex),ej(ex),l(ex)):e.isPreviewMode&&e.isEEPreview?(document.querySelector("#ribbonPreLoadingIndicator").remove(),document.querySelector("#scWebEditRibbon").remove(),document.querySelector("#sc-ext-toggleRibon-button")&&document.querySelector("#sc-ext-toggleRibon-button").remove(),o("**** Preview Mode ****","orange")):e.isGalleryLanguageExpEd?(o("**** Language Menu ****","orange"),p(ex)):e.isGalleryVersionExpEd?o("**** Version Menu ****","orange"):e.isInsertPage?(o("**** Insert Page ****","orange"),Z(ex)):e.isSitecoreModule?o("**** Sitecore Module ****","orange"):e.isDialogEE?o("**** Dialog ****","orange"):e.isNavigationTree?(o("**** Navigation Tree ****","orange"),Z(ex)):(o("**** Website preview in EE ****","orange"),ec(ex),ef(ex),eb(ex),eE(ex),eS(ex),Z(ex),eh(ex))),(e.isHorizon||e.isHorizonFieldBuilder||e.isHorizonExplorer)&&(o("Horizon detected","red"),document.body&&document.body.classList.add("satExtension"),ew(ex))});