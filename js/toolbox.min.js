import*as global from"./modules/global.js";import{consoleLog,loadJsFile,initDarkMode,autoDarkMode,getScItemData}from"./modules/helpers.js";import{showSnackbar}from"./modules/snackbar.js";import{workboxNotifications}from"./modules/workbox.js";import{resumeFromWhereYouLeftOff,historyNavigation}from"./modules/history.js";import{checkNotificationPermissions,checkPublishNotification}from"./modules/notification.js";import{initFlagRibbonEE,initLanguageMenuEE,initLanguageMenuCE,initFlagsPublishingWindow,initFlagsPublish}from"./modules/language.js";import{initCharsCount,initCheckboxes,initPublishCheckboxes,refreshContentEditor}from"./modules/contenteditor.js";import{initGravatarImage,initUserMenu}from"./modules/users.js";import{initInstantSearch,enhancedSitecoreSearch}from"./modules/search.js";import{insertModal,insertPanel}from"./modules/insert.js";import{initMediaExplorer,initMediaCounter,initMediaDragDrop,initMediaViewButtons}from"./modules/media.js";import{initExperimentalUi,insertSavebar,initInsertIcon,initGutter,initColorPicker,initSitecoreMenu,initContrastedIcons,initSvgAnimation,initEventListeners}from"./modules/experimentalui.js";import{initFavorites}from"./modules/favorites.js";import{initGroupedErrors}from"./modules/errors.js";import{enhancedBucketLists}from"./modules/buckets.js";import{initRteTooltips,initSyntaxHighlighterRte}from"./modules/rte.js";import{initPreviewButton,listenPreviewTab}from"./modules/preview.js";import{initLaunchpadIcon,initLaunchpadMenu}from"./modules/launchpad.js";import{initAutoExpandTree,initTreeGutterTooltips}from"./modules/contenttree.js";import{storeCurrentPageEE,toolbarEditInCE,addToolbarTooltip,addComponentTooltip,addExtraButtons,resetExperienceEditor}from"./modules/experienceeditor.js";chrome.storage.sync.get(storage=>{if(global.isSitecore&&!global.isEditMode&&!global.isLoginPage&&!global.isCss&&!global.isUploadManager){if(consoleLog("Sitecore detected","red"),document.body.classList.add("satExtension"),loadJsFile("js/inject.js"),checkNotificationPermissions(),checkPublishNotification(storage),initUserMenu(storage),initDarkMode(storage),autoDarkMode(storage),initExperimentalUi(storage),initContrastedIcons(storage),initAutoExpandTree(storage),initTreeGutterTooltips(),refreshContentEditor(),global.isContentEditor){consoleLog("**** CE ****","yellow");let ScItem=getScItemData();resumeFromWhereYouLeftOff(storage),initInstantSearch(storage),initFavorites(storage),workboxNotifications(storage),historyNavigation(),showSnackbar(),storage.feature_experimentalui&&(consoleLog("**** Experimental ****","yellow"),initSvgAnimation(),insertSavebar(),insertModal(ScItem.id,ScItem.language,ScItem.version),insertPanel(),initInsertIcon(),initGutter(),initColorPicker(),initSitecoreMenu(),initEventListeners())}(global.isDesktop&&!global.isGalleryFavorites&&!global.isXmlControl||global.isLaunchpad)&&(consoleLog("**** Launchpad - Desktop Shell ****","orange"),initLaunchpadIcon(storage),initLaunchpadMenu(storage),workboxNotifications(storage)),global.isPreviewTab?(consoleLog("**** Preview tab ****","orange"),initPreviewButton(storage),listenPreviewTab(storage)):global.isMediaFolder?(consoleLog("**** Media Folder ****","orange"),initMediaCounter(),initMediaDragDrop(),initMediaViewButtons(),initMediaExplorer(storage)):global.isFieldEditor?(consoleLog("**** Field editor ****","orange"),initCheckboxes(storage),initCharsCount(storage),initGroupedErrors(storage),enhancedBucketLists()):global.isExperienceProfile?(consoleLog("**** Experience Profile ****","orange"),initGravatarImage(storage)):global.isRichTextEditor||global.isHtmlEditor?(consoleLog("**** Rich Text Editor ****","orange"),initRteTooltips(storage),initSyntaxHighlighterRte(storage)):global.isContentEditorApp&&storage.feature_experimentalui||global.isContentEditorApp&&storage.feature_instantsearch?document.querySelector("#globalLogo")&&document.querySelector("#globalLogo").setAttribute("target","_parent"):global.isSearch?(consoleLog("**** Internal Search ****","orange"),enhancedSitecoreSearch()):global.isGalleryLanguage?(consoleLog("**** Languages menu ****","orange"),initLanguageMenuCE(storage)):global.isPublishDialog?(consoleLog("**** Publishing window ****","orange"),initFlagsPublishingWindow(storage)):global.isPublishWindow?(consoleLog("**** Publish / Rebuild / Package ****","orange"),initPublishCheckboxes(storage),initFlagsPublish(storage)):global.isEditorFolder?consoleLog("**** Editors folder ****","orange"):global.isGalleryVersion?consoleLog("**** Versions menu ****","orange"):global.isLayoutDetails?consoleLog("**** Layout Details ****","orange"):global.isXmlControl&&!global.isRichText?consoleLog("**** XML Control (Window) ****","orange"):global.isDialog||global.isLockedItems?consoleLog("**** Dialog UI ****","orange"):global.isSourceBrowser?consoleLog("**** Source Browser ****","orange"):global.isGalleryLinks&&consoleLog("**** Links menu ****","orange")}(global.isEditMode&&!global.isLoginPage||global.isPreviewMode&&!global.isLoginPage)&&(consoleLog("Experience Editor detected","red"),document.body.classList.add("satExtension"),loadJsFile("js/inject.js"),checkNotificationPermissions(),initDarkMode(storage),autoDarkMode(storage),initExperimentalUi(storage),initContrastedIcons(storage),global.isRibbon?(consoleLog("**** Ribbon ****","yellow"),initFlagRibbonEE(storage)):global.isGalleryLanguageExpEd?initLanguageMenuEE(storage):(consoleLog("**** Page in EE ****","yellow"),storeCurrentPageEE(),toolbarEditInCE(),addComponentTooltip(),addToolbarTooltip(),addExtraButtons(storage),resetExperienceEditor(storage)))});