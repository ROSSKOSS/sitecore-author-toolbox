import*as e from"./modules/global.js";import{log as o,loadJsFile as r,getScItemData as i}from"./modules/helpers.js";import{initDarkMode as s,detectSwitchDarkMode as t,fixGreenItemsInDarkMode as a}from"./modules/dark.js";import{addHelptextIcons as n}from"./modules/help.js";import{showSnackbar as l}from"./modules/snackbar.js";import{checkWorkbox as d}from"./modules/workbox.js";import{resumeFromWhereYouLeftOff as g,historyNavigation as m}from"./modules/history.js";import{checkNotificationPermissions as u,checkPublishNotification as c}from"./modules/notification.js";import{initFlagRibbonEE as p,initLanguageMenuEE as f,initLanguageMenuCE as b,initFlagsPublishingWindow as E,initFlagsPublish as S}from"./modules/language.js";import{initCharsCount as y,initCheckboxes as h,initDateTimeField as j,initPasswordField as w,refreshContentEditor as P,contentTreeScrollTo as x,keyEventListeners as L,resetContentEditor as M}from"./modules/contenteditor.js";import{initAppName as R,initGravatarImage as v,initUserMenu as k,initIntroScreen as D}from"./modules/users.js";import{initInstantSearch as W,enhancedSitecoreSearch as T}from"./modules/search.js";import{insertModal as B,insertPanel as I}from"./modules/insert.js";import{initMediaExplorer as H,initMediaCounter as A,initMediaDragDrop as C,initMediaViewButtons as q,initUploadButton as F,initUploader as U,initLightbox as z,initMediaSearchBox as G}from"./modules/media.js";import{initOnboarding as V,initExperimentalUi as N,initInsertIcon as Q,initGutter as X,initSitecoreRibbon as J,initSvgAnimation as O,initSvgAnimationPublish as K,initEventListeners as Y,initTitleBarDesktop as Z,initMaterializeIcons as $,insertSavebarEE as _}from"./modules/experimentalui.js";import{initFavorites as ee}from"./modules/favorites.js";import{initGroupedErrors as eo}from"./modules/errors.js";import{enhancedBucketLists as er}from"./modules/buckets.js";import{initRteTooltips as ei,initSyntaxHighlighterRte as es}from"./modules/rte.js";import{initPreviewButton as et,listenPreviewTab as ea}from"./modules/preview.js";import{initLaunchpadIcon as en,initLaunchpadMenu as el}from"./modules/launchpad.js";import{initAutoExpandTree as ed,initTreeGutterTooltips as eg}from"./modules/contenttree.js";import{initQuerySuggestions as em}from"./modules/template.js";import{initPublishingStatus as eu}from"./modules/publishingdashboard.js";import{initPreviewButtonsEE as ec,updateEETitle as ep,storeCurrentPageEE as ef,addToolbarEditCE as eb,addToolbarTooltip as eE,addPlaceholderTooltip as eS,resetExperienceEditor as ey,initRenderingSearchBox as eh,initOptionalFields as ej,initGroupedErrorsEE as ew}from"./modules/experienceeditor.js";import{initHorizon as eP}from"./modules/horizon.js";import{initTabSections as ex}from"./modules/tabs.js";chrome.storage.sync.get(eL=>{if(!e.isSitecore||!e.isSitecoreJs||e.isEditMode||e.isLoginPage||e.isCss)M();else{if(o("Sitecore detected","red"),document.body&&document.body.classList.add("satExtension"),r("js/inject.js"),u(),c(eL),ed(eL),L(),k(eL),s(eL),t(eL),e.isContentEditor){o("**** CE ****","yellow");let eM=i();eg(),P(eL),g(eL),W(eL),ee(eL),m(),l(eL),x(),z(),D(),a(),console.log("WuWHDQHWIHWHQP!!!!"),eL.feature_experimentalui&&(o("**** Experimental ****","yellow"),R(eL,"Content Editor"),O(eL),B(eL,eM.id,eM.language,eM.version),I(),Q(eL),X(),J(),Y(),Z(),V(),$(eL))}if(e.isLaunchpad)o("**** Launchpad ****","orange"),en(eL),d(eL),l(eL),D();else if(!e.isDesktop||e.isGalleryFavorites||e.isXmlControl){if(e.isUserManager)o("**** User Manager ****","orange"),R(eL,"User Manager");else if(e.isSecurityEditor)o("**** Security Editor ****","orange"),R(eL,"Security Editor");else if(e.isAccessViewer)o("**** Access Viewer ****","orange"),R(eL,"Access Viewer");else if(e.isDomainManager)o("**** Domain Manager ****","orange"),R(eL,"Domain Manager");else if(e.isRoleManager)o("**** Role Manager ****","orange"),R(eL,"Role Manager");else if(e.isPowerShellIse)o("**** PowerShell ISE ****","orange"),R(eL,"PowerShell ISE");else if(e.isPowerShellReports)o("**** PowerShell Reports ****","orange"),R(eL,"PowerShell Reports");else if(e.isRecycleBin)o("**** Recycle Bin ****","orange"),R(eL,"Recycle Bin");else if(e.isWorkbox)o("**** Workbox ****","orange"),R(eL,"Workbox");else if(e.isTemplateBuilder)o("**** Template Builder ****","orange"),R(eL,"Template Builder"),em(eL);else if(e.isPublishDashboard)o("**** Publishing Dashboard ****","orange"),R(eL,"Publishing Dashboard"),eu(eL);else{o("**** Non identified ****","green"),o(e.windowLocationHref,"green"),N(eL);let eR=document.querySelector("*[data-sc-id=HeaderTitle]");R(eL,eR=eR?eR.innerText:"")}}else o("**** Desktop Shell ****","orange"),R(eL,"Sitecore Desktop"),el(eL),d(eL),l(eL);e.isPreviewTab?(o("**** Preview tab ****","orange"),et(eL),ea(eL)):e.isMediaFolder?(o("**** Media Folder ****","orange"),A(eL),C(eL),q(eL),H(eL),G(eL),$(eL)):e.isFieldEditor?(o("**** Field editor ****","orange"),h(eL),j(eL),w(eL),y(eL),eo(eL),n(),er(),$(eL),ex(eL)):e.isExperienceProfile?(o("**** Experience Profile ****","orange"),v(eL)):e.isRichTextEditor||e.isHtmlEditor?(o("**** Rich Text Editor ****","orange"),ei(eL),es(eL)):e.isContentEditorApp&&eL.feature_experimentalui||e.isContentEditorApp&&eL.feature_instantsearch?(o("**** Content Editor App ****","orange"),document.querySelector("#globalLogo")&&document.querySelector("#globalLogo").setAttribute("target","_parent")):e.isSearch?(o("**** Internal Search ****","orange"),T(eL)):e.isGalleryLanguage?(o("**** Languages menu ****","orange"),b(eL)):e.isPublishDialog?(o("**** Publishing window ****","orange"),E(eL)):e.isPublishWindow||e.isInstallationWizard?(o("**** Publish / Rebuild / Package ****","orange"),h(eL),S(eL),K(eL)):e.isExportSiteWizard?(o("**** Export Site Wizard ****","orange"),K(eL)):e.isUploadPackage?(o("**** Upload Package ****","orange"),K(eL)):e.isUserOptions?(o("**** User options ****","orange"),document.querySelectorAll(".scTabs > div > fieldset > div").forEach(function(e){"Quick info section"==e.innerText&&e.setAttribute("style","color:red; font-weight:bold"),"Item title bar"==e.innerText&&e.setAttribute("style","color:red; font-weight:bold")})):e.isEditorFolder?(o("**** Editors folder ****","orange"),$(eL)):e.isGalleryVersion?o("**** Versions menu ****","orange"):e.isLayoutDetails?(o("**** Layout Details ****","orange"),$(eL)):e.isDialog||e.isLockedItems?(o("**** Dialog UI ****","orange"),$(eL),U()):e.isGalleryFavorites?(o("**** Favorites ****","orange"),$(eL)):e.isMediaBrowser?(o("**** Media Browser ****","orange"),F(eL)):e.isSelectRendering&&!e.isSourceBrowser?(o("**** Select Rendering ****","orange"),R(eL,"Select Rendering"),eh(eL),$(eL)):!e.isXmlControl||e.isRichText||e.isWorkbox?e.isSourceBrowser?o("**** Source Browser ****","orange"):e.isGalleryLinks&&o("**** Links menu ****","orange"):(o("**** XML Control (Window) ****","orange"),h(eL),ex(eL),j(eL),w(eL),$(eL))}(e.isEditMode&&!e.isLoginPage||e.isPreviewMode&&!e.isLoginPage||e.isSitecoreModule&&!e.isLoginPage)&&(o("Experience Editor detected","red"),document.body&&document.body.classList.add("satExtension"),r("js/inject.js"),u(),c(eL),L(),p(eL),k(eL,"EE"),s(eL),t(eL),e.isRibbon?(o("**** EE Ribbon ****","orange"),document.querySelector("body").classList.add("satEEExperimentalUi"),J(),ec(eL),ef(),_(eL),ew(eL),d(eL)):e.isPreviewMode&&e.isEEPreview?(document.querySelector("#ribbonPreLoadingIndicator").remove(),document.querySelector("#scWebEditRibbon").remove(),document.querySelector("#sc-ext-toggleRibon-button")&&document.querySelector("#sc-ext-toggleRibon-button").remove(),o("**** Preview Mode ****","orange")):e.isGalleryLanguageExpEd?(o("**** Language Menu ****","orange"),f(eL)):e.isGalleryVersionExpEd?o("**** Version Menu ****","orange"):e.isInsertPage?(o("**** Insert Page ****","orange"),$(eL)):e.isSitecoreModule?o("**** Sitecore Module ****","orange"):e.isDialogEE?o("**** Dialog ****","orange"):e.isNavigationTree?(o("**** Navigation Tree ****","orange"),$(eL)):(o("**** Website preview in EE ****","orange"),ep(eL),eb(eL),eE(eL),eS(eL),ey(eL),$(eL),ej(eL))),(e.isHorizon||e.isHorizonFieldBuilder||e.isHorizonExplorer)&&(o("Horizon detected","red"),document.body&&document.body.classList.add("satExtension"),eP(eL))});