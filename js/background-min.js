"use strict";let isContextMenu=!1;function onClickHandler(e,t){var n=e.pageUrl.substring(0,e.pageUrl.indexOf("?"));chrome.tabs.executeScript(t.id,{code:'window.location.href = "'+n+'?sc_mode=edit";'})}function showContextMenu(e){var t=new URL(e.url),n=e.url.includes("/sitecore/");chrome.cookies.getAll({},(function(e){for(var o in e){if(t.hostname==e[o].domain&&"shell#lang"==e[o].name&&!n){isContextMenu||(chrome.contextMenus.create({title:"Edit in Experience Editor (beta)",contexts:["page"],id:"SitecoreAuthorToolbox"}),isContextMenu=!0);break}isContextMenu&&(chrome.contextMenus.remove("SitecoreAuthorToolbox"),isContextMenu=!1)}}))}chrome.tabs.onUpdated.addListener((function(e,t,n){chrome.tabs.getSelected(null,(function(e){showContextMenu(e)}))})),chrome.tabs.onActivated.addListener((function(e,t,n){chrome.tabs.getSelected(null,(function(e){showContextMenu(e)}))})),chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.onClicked.addListener(onClickHandler),chrome.declarativeContent.onPageChanged.removeRules(void 0,(function(){chrome.declarativeContent.onPageChanged.addRules([{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{urlContains:"/sitecore/"}})],actions:[new chrome.declarativeContent.ShowPageAction]}])}))}));