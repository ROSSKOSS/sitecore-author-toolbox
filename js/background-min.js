"use strict";let isContextMenu=!1;function onClickHandler(e,n){console.info("item "+e.menuItemId+" was clicked"),console.info("info: "+JSON.stringify(e)),console.info("tab: "+JSON.stringify(n));var o=e.pageUrl.substring(0,e.pageUrl.indexOf("?"));chrome.tabs.executeScript(n.id,{code:'window.location.href = "'+o+'?sc_mode=edit";'})}chrome.contextMenus.onClicked.addListener(onClickHandler),chrome.tabs.onActivated.addListener((function(e,n,o){chrome.tabs.getSelected(null,(function(e){var n=new URL(e.url),o=e.url.includes("/sitecore/");chrome.cookies.getAll({},(function(e){for(var t in e){if(n.hostname==e[t].domain&&"sxa_site"==e[t].name&&!o){console.info("isSitecore: "+o+" --\x3e isMenu: "+isContextMenu+" --\x3e Cookie: "+e[t].name+" --\x3e Value: "+e[t].value),isContextMenu||(chrome.contextMenus.create({title:"Edit in Experience Editor (beta)",contexts:["page"],id:"SitecoreAuthorToolbox"}),isContextMenu=!0);break}isContextMenu&&(chrome.contextMenus.remove("SitecoreAuthorToolbox"),isContextMenu=!1)}}))}))})),chrome.runtime.onInstalled.addListener((function(){chrome.declarativeContent.onPageChanged.removeRules(void 0,(function(){chrome.declarativeContent.onPageChanged.addRules([{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{urlContains:"/sitecore/"}})],actions:[new chrome.declarativeContent.ShowPageAction]}])}))}));