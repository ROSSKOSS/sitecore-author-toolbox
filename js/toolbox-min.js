chrome.runtime.getManifest().version;const e=chrome.runtime.getURL("images/rocket.svg"),t=chrome.runtime.getURL("images/lock.svg"),a=chrome.runtime.getURL("images/workflow.svg"),r=(chrome.runtime.getURL("images/publish.svg"),chrome.runtime.getURL("images/unicorn.svg")),s=(chrome.runtime.getURL("images/user.svg"),chrome.runtime.getURL("images/error.svg")),n=chrome.runtime.getURL("images/edit.svg"),o=chrome.runtime.getURL("images/media.svg"),i=chrome.runtime.getURL("images/translate.svg"),l=chrome.runtime.getURL("images/version.svg"),c=chrome.runtime.getURL("images/Flags/32x32/flag_generic.png"),u=chrome.runtime.getURL("images/ajax-loader.gif"),d=chrome.runtime.getURL("images/dot_green.svg"),g=chrome.runtime.getURL("images/dot_red.svg"),m=chrome.runtime.getURL("images/chrome.png"),f=(chrome.runtime.getURL("images/sat.png"),chrome.runtime.getURL("images/ce.png")),p=["ARABIC","HEBREW","PERSIAN","URDU","SINDHI"],h=window.location.href.toLowerCase(),v=window.location.search.toLowerCase(),y=new URLSearchParams(v),b=chrome.runtime.getURL("options.html"),_=chrome.runtime.getURL("images/icon.png");let x,S,A,T,M,L=h.includes("/sitecore/"),k=document.querySelector(".pagemode-preview");!k&&(k=h.includes("sc_mode=preview"));let E=document.querySelector(".pagemode-edit");!E&&(E=h.includes("sc_mode=edit")),!E&&(E=h.includes("/experienceeditor/"));y.get("sc_content");let C=h.includes("gallery.language"),w=h.includes("selectlanguagegallery"),B=h.includes("gallery.favorites"),I=(h.includes("gallery.versions"),h.includes("/admin/cache.aspx")),q=h.includes("/admin/"),R=(h.includes("sitecore.shell.applications.media.mediabrowser"),h.includes("media%20folder.aspx")),N=h.includes("/uploadmanager/"),U=h.includes("/shell/applications/publish.aspx"),H=h.includes("/shell/applications/security/"),O=document.querySelector("#scLanguage"),D=h.includes("/applications/experienceeditor/"),P=h.includes("/content/"),j=h.includes("sitecore/login"),F=h.includes("/client/applications/launchpad"),G=h.includes("/shell/default.aspx"),V=h.includes("/controls/rich%20text%20editor/"),W=h.includes(".edithtml.aspx"),K=h.includes("field%20editor.aspx"),Y=h.includes("jquerymodaldialogs.html"),Q=h.includes("telerik.web.ui"),z=(h.includes("securitydetails.aspx"),h.includes("editors.folder.aspx"),h.includes("/ribbon.aspx")),X=h.includes("experienceeditor/dialogs/confirm/"),Z=h.includes("/dialogs/insertpage/"),J=(h.includes("createnewuser"),h.includes("user%20manager.aspx")),$=(h.includes("dialogs.personalization"),h.includes("rules.aspx")),ee=h.includes(".css"),te=h.includes("showresult.aspx"),ae=(document.querySelector(".scEditorHeaderQuickInfoInput"),window.location.hash.substr(1)),re=document.querySelector("a[title='Workbox']"),se=h.includes("&ro="),ne=h.includes("&sc_ce_uri="),oe=document.querySelector("#ContentTreeHolder");var ie;const le=JSON.parse('[{"language":"Afrikaans","flag":"SOUTH_AFRICA"},{"language":"Arabic","flag":"SAUDI_ARABIA"},{"language":"Belarusian","flag":"BELARUS"},{"language":"Bulgarian","flag":"BULGARIA"},{"language":"Catalan","flag":""},{"language":"Czech","flag":"CZECH_REPUBLIC"},{"language":"Danish","flag":"DENMARK"},{"language":"German","flag":"GERMANY"},{"language":"Greek","flag":"GREECE"},{"language":"English","flag":"GREAT_BRITAIN"},{"language":"Spanish","flag":"SPAIN"},{"language":"Estonian","flag":"ESTONIA"},{"language":"Basque","flag":""},{"language":"Persian","flag":"IRAN"},{"language":"Finnish","flag":"FINLAND"},{"language":"Faroese","flag":""},{"language":"French","flag":"FRANCE"},{"language":"Galician","flag":""},{"language":"Gujarati","flag":"INDIA"},{"language":"Hebrew","flag":"ISRAEL"},{"language":"Hindi","flag":"INDIA"},{"language":"Croatian","flag":"CROATIA"},{"language":"Hungarian","flag":"HUNGARY"},{"language":"Armenian","flag":"ARMENIA"},{"language":"Indonesian","flag":"MAIN_COUNTRY"},{"language":"Icelandic","flag":"ICELAND"},{"language":"Italian","flag":"ITALY"},{"language":"Japanese","flag":"JAPAN"},{"language":"Georgian","flag":"GEORGIA"},{"language":"Kazakh","flag":"KAZAKHSTAN"},{"language":"Kannada","flag":"INDIA"},{"language":"Korean","flag":"SOUTH_KOREA"},{"language":"Kyrgyz","flag":"KYRGYZSTAN"},{"language":"Lithuanian","flag":"LITHUANIA"},{"language":"Latvian","flag":"LATVIA"},{"language":"Maori","flag":"NEW_ZEALAND"},{"language":"Macedonian","flag":"MACEDONIA"},{"language":"Mongolian","flag":"MONGOLIA"},{"language":"Marathi","flag":"INDIA"},{"language":"Malay","flag":"MALAYSIA"},{"language":"Maltese","flag":"MALTA"},{"language":"Norwegian BokmÃ¥l","flag":"NORWAY"},{"language":"Dutch","flag":"NETHERLANDS"},{"language":"Norwegian Nynorsk","flag":"NORWAY"},{"language":"Punjabi","flag":"INDIA"},{"language":"Polish","flag":"POLAND"},{"language":"Portuguese","flag":"PORTUGAL"},{"language":"Romanian","flag":"ROMANIA"},{"language":"Russian","flag":"RUSSIA"},{"language":"Sanskrit","flag":"INDIA"},{"language":"Sami, Northern","flag":""},{"language":"Slovak","flag":"SLOVAKIA"},{"language":"Slovenian","flag":"SLOVENIA"},{"language":"Albanian","flag":"ALBANIA"},{"language":"Swedish","flag":"SWEDEN"},{"language":"Kiswahili","flag":"KENYA"},{"language":"Tamil","flag":"INDIA"},{"language":"Telugu","flag":"INDIA"},{"language":"Thai","flag":"THAILAND"},{"language":"Setswana","flag":"SOUTH_AFRICA"},{"language":"Turkish","flag":"TURKEY"},{"language":"Tatar","flag":"RUSSIA"},{"language":"Ukrainian","flag":"UKRAINE"},{"language":"Urdu","flag":"PAKISTAN"},{"language":"Vietnamese","flag":"VIETNAM"},{"language":"isiXhosa","flag":"SOUTH_AFRICA"},{"language":"Chinese","flag":"CHINA"},{"language":"isiZulu","flag":"SOUTH_AFRICA"}]'),ce=()=>{let e="light";return e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",e},ue=(e,t,a)=>{chrome.storage.sync.get(["scData"],(function(r){let s=new Object;null!=r.scData?(s=r.scData,s[window.document.location.origin]={scItemID:e,scLanguage:t,scVersion:a}):s[window.document.location.origin]={scItemID:e,scLanguage:t,scVersion:a},chrome.storage.sync.set({scData:s},(function(){return s}))}))},de=(e=null)=>{var t,a,r=!1;null==e?document.querySelector(".sitecoreItemPath")&&(r=document.querySelector(".sitecoreItemPath").href,t=document.querySelector(".liveUrlStatus")):e.querySelector(".sitecoreItemPath")&&(r=e.querySelector(".sitecoreItemPath").href,t=e.querySelector(".liveUrlStatus")),t&&(t.innerHTML='<img src="'+u+'" style="width: 10px; float: initial; margin: unset;"/>'),setTimeout((function(){if(r){(new AbortController).signal;var s=new Request(r);(n=8e3,o=fetch(s),new Promise((function(e,t){setTimeout(()=>{t(new Error("timeout"))},n),o.then(e,t)}))).then((function(r){t=null==e?document.querySelector(".liveUrlStatus"):e.querySelector(".liveUrlStatus"),a="404"==r.status||"500"==r.status?"<span class='liveStatusRed'><img src=' "+g+"'/> Not available ("+r.status+")</span>":"<span class='liveStatusGreen'><img src=' "+d+"'/> Published</span>",t.innerHTML=null!=t?a:""})).catch((function(e){console.info("Sitecore Author Toolbox: Error in fetching your CD URL ("+r+"), it might be a timeout or a settings issue, please check."),a="<span class='liveStatusGray'>...timeout</span>",null!=t&&(t.innerHTML="")}))}var n,o}),200)},ge=(e,t)=>{new Notification(e,{body:t,icon:chrome.runtime.getURL("images/icon.png")});var a=new Audio(chrome.runtime.getURL("audio/notification.mp3")).play();void 0!==a&&a.then(e=>{}).catch(e=>{})};function me(e){this.style.left=x+e.clientX-S+"px"}function fe(){var e=document.querySelector(".scExpTab");e&&e.addEventListener("mousedown",(function(t){x=this.offsetLeft,S=t.clientX,this.addEventListener("mousemove",me,!1),window.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",me,!1)}),!1)}),!1)}const pe=e=>{var t=e;return""!=t&&t.includes(" :")&&(t=(t=t.split(" :"))[0]),(t=(t=null==(t=t.split(" ("))[1]?t[0]:t[1]).split(")"))[0].includes(", ")&&((t=t[0].split(", "))[0]=t[1],t[0]=t[0].replace(" ","_")),(t=(t=t[0].replace(" ","_")).toUpperCase()).replace("TRADITIONAL,_","").replace("SIMPLIFIED,_","").replace("_S.A.R.","").replace("_PRC","").replace("U.A.E.","UNITED_ARAB_EMIRATES").replace("KOREA","SOUTH_KOREA").replace("UNITED_STATES","USA").replace("UNITED_KINGDOM","GREAT_BRITAIN").replace("ENGLISH","GREAT_BRITAIN").replace("PRC","CHINA")},he=()=>{var e=new Object,t=document.querySelectorAll(".scEditorQuickInfo  > tbody > tr");for(var a of t)"Item ID:"==a.cells[0].innerText&&(e.id=a.cells[1].querySelector("input").value.toLowerCase()),"Item name:"==a.cells[0].innerText&&(e.name=a.cells[1].innerText.toLowerCase()),"Item path:"==a.cells[0].innerText&&(e.path=a.cells[1].querySelector("input").value.toLowerCase()),"Template:"==a.cells[0].innerText&&(e.template=a.cells[1].querySelector("a").innerText.toLowerCase()),"Created from:"==a.cells[0].innerText&&(e.from=a.cells[1].innerText.toLowerCase()),"Item owner:"==a.cells[0].innerText&&(e.owner=a.cells[1].querySelector("input").value.toLowerCase());return e},ve=()=>{var u=0;let d=document.querySelector(".scEditorHeader");document.querySelector(".scEditorHeaderTitle");document.querySelector(".scEditorQuickInfo");let g=document.querySelector(".scEditorHeaderQuickInfoInput"),m=document.querySelector(".scEditorHeaderVersionsLanguage"),f=document.querySelector(".scEditorHeaderVersionsVersion > span");f&&(f=f.innerText);window.location.hash.substr(1);let v=document.querySelector(".scEditorTabHeaderActive");document.querySelectorAll(".scRibbonEditorTabNormal");var y=document.querySelectorAll(" .scValidationMarkerIcon ");document.querySelector(" .scValidationResult "),document.querySelector("#EditorFrames");let _=document.querySelector(".scEditorSections"),x=(document.querySelector("#SearchPanel"),!1);var S,T,L=document.querySelector(".scEditorHeaderVersionsLanguage");if(L)var k=L.getAttribute("title"),E=(S=L.innerHTML,(T=document.createElement("div")).innerHTML=S,T.textContent||T.innerText||"");if(g){let t=he();var C=document.getElementsByClassName("scEditorHeaderQuickInfoInput"),w=t.id,B=C[1].getAttribute("value").toLowerCase()+"/",I=(C[1].getAttribute("value").toLowerCase(),B.toLowerCase()+"/"),q=(B=B.split("/home/"))[0].toLowerCase();q=(q=q.split("/")).slice(-1)[0];I.includes("/marketing control panel/"),I.includes("/sitecore/templates"),I.includes("/sitecore/system"),I.includes("/sitecore/layout"),I.includes("/sitecore/forms");var R,N,U=I.includes("/sitecore/content"),H=I.includes("/sitecore/media library"),O=I.includes("/data/"),D=(I.includes("/home/"),I.includes("/settings/")),P=I.includes("/presentation/"),j=document.getElementById("scLanguage").getAttribute("value").toLowerCase(),F=window.location.origin+"/?sc_itemid="+w+"&sc_mode=normal&sc_lang="+j+"&sc_version="+f,G=E.includes("(");B=null!=B[1]?encodeURI(window.location.origin+"/"+j+"/"+B[1]+"?sc_site=xxxsxa_sitexxx&sc_mode=normal").toLowerCase():encodeURI(window.location.origin+"/"+j+"/?sc_site=xxxsxa_sitexxx&sc_mode=normal").toLowerCase(),U&&!O&&!P&&!D||H?chrome.storage.sync.get(["feature_urls","domain_manager","feature_urlstatus"],(function(t){null==t.feature_urls&&(t.feature_urls=!0),null==t.feature_urlstatus&&(t.feature_urlstatus=!0);var a=void 0,r=t.domain_manager,s="CM server";for(var n in r)if(window.location.origin==n){a=r[n];break}!document.querySelector("#scMessageBarUrl")&&t.feature_urls&&chrome.runtime.sendMessage({greeting:"sxa_site"},(function(r){if(null!=r.farewell){var n=q.toLowerCase(),i=r.farewell.toLowerCase(),l=i.includes(n);0}var c;if(null!=r.farewell&&l&&null==a?B=B.replace("xxxsxa_sitexxx",r.farewell):null==a?B=B.replace("sc_site=xxxsxa_sitexxx&",""):null!=a&&(B=(B=(B=B.replace("sc_site=xxxsxa_sitexxx&","")).replace("?sc_mode=normal","")).replace(window.location.origin,a),F=(F=F.replace(window.location.origin,a)).replace("&sc_mode=normal",""),s="CD/Live server"),H){var u=w.replace(/-/g,"").replace("{","").replace("}","");B=window.location.origin+"/sitecore/shell/Applications/-/media/"+u+".ashx?vs="+f+"&ts="+Math.round(1e5*Math.random()),c='<div id="scMessageBarUrl" class="scMessageBar scWarning"><div class="scMessageBarIcon" style="background-image:url('+o+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">Media Live URL</div><div class="scMessageBarText">If you want to preview this media</div><ul class="scMessageBarOptions" style="margin:0px"><li class="scMessageBarOptionBullet"><a href="'+B+'" target="_blank" class="scMessageBarOption sitecoreItemPath">Open this media</a></li></ul></div></div>'}else c='<div id="scMessageBarUrl" class="scMessageBar scWarning"><div class="scMessageBarIcon" style="background-image:url('+e+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">Sitecore Live URL <span class="liveUrlBadge" onclick="location.href = \''+b+"?configure_domains=true&launchpad=true&url="+h+'\'" title="Click to configure your domains">'+s+'</span> <span class="liveUrlStatus"></span></div><div class="scMessageBarText">If you want to preview this page in <b>'+k+"</b> (version "+f+')</div><ul class="scMessageBarOptions" style="margin:0px"><li class="scMessageBarOptionBullet"><a href="'+B+'" target="_blank" class="scMessageBarOption sitecoreItemPath">Open this link</a> or try <a href="'+F+'" target="_blank" class="scMessageBarOption">this alternative link</a></li></ul></div></div>';d.insertAdjacentHTML("afterend",c),t.feature_urlstatus&&!H&&setTimeout((function(){de()}),500)}))})):O&&chrome.storage.sync.get(["feature_urls","feature_messagebar"],(function(e){if(null==e.feature_urls&&(e.feature_urls=!0),null==e.feature_messagebar&&(e.feature_messagebar=!0),!document.getElementById("scMessageBarInfo")&&e.feature_urls&&e.feature_messagebar){var t='<div id="scMessageBarInfo" class="scMessageBar scInformation"><div class="scMessageBarIcon" style="background-image:url('+n+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">You are editing a data source</div><div class="scMessageBarText">To see it, you need to add/edit it to any page via the</b></div><ul class="scMessageBarOptions" style="margin:0px"><li class="scMessageBarOptionBullet">Presentation Details or Experience Editor</li></ul></div></div>';d.insertAdjacentHTML("afterend",t)}}))}else if(!document.querySelector("#scMessageBarUrl")&&_){var V='<div id="scMessageBarUrl" class="scMessageBar scWarning"><div class="scMessageBarIcon" style="background-image:url('+e+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">ð­ Oh snap, you are missing out big! ð­</div><div class="scMessageBarText">To fully enjoy Sitecore Author Toolbox, please enable <b>Title bar</b> and <b>Quick info section</b> under <b>Application Options</b>.</div><ul class="scMessageBarOptions" style="margin:0px"><li class="scMessageBarOptionBullet"><a href="" onclick="javascript:return scForm.postEvent(this,event,\'shell:useroptions\')" class="scMessageBarOption">Open Application Options</a>.</li></ul></div></div>';_.insertAdjacentHTML("afterbegin",V)}if(chrome.storage.sync.get(["feature_flags"],(function(e){null==e.feature_flags&&(e.feature_flags=!0);var t=document.querySelector(".scEditorHeaderVersionsVersion");if(t){var a=t.getAttribute("title");t.querySelector("span").innerText=a.replace("."," â¾")}if(G)R=(R=pe(E)).toLowerCase(),R=chrome.runtime.getURL("images/Flags/24x24/flag_"+R+".png"),!document.querySelector("#scFlag")&&e.feature_flags&&R&&(N=R,setTimeout((function(){v=document.querySelector(".scEditorTabHeaderActive"),v.insertAdjacentHTML("afterbegin",'<img id="scFlag" src="'+N+'" style="width: 24px; vertical-align: middle; padding: 0px 4px 0px 0px;" onerror="this.onerror=null;this.src=\''+c+"';\"/>")}),100)),!document.querySelector("#scFlagMenu")&&e.feature_flags&&R&&m.insertAdjacentHTML("afterbegin",'<img id="scFlagMenu" src="'+R+'" style="width: 15px; vertical-align: sub; padding: 0px 5px 0px 0px;" onerror="this.onerror=null;this.src=\''+c+"';\"/>");else if(e.feature_flags)for(let t in le)le.hasOwnProperty(t)&&E&&E.toUpperCase()==le[t].language.toUpperCase()&&(R=(R=le[t].flag).toLowerCase(),R=chrome.runtime.getURL("images/Flags/24x24/flag_"+R+".png"),!document.querySelector("#scFlag")&&e.feature_flags&&R&&(N=R,setTimeout((function(){v=document.querySelector(".scEditorTabHeaderActive"),v.insertAdjacentHTML("afterbegin",'<img id="scFlag" src="'+N+'" style="width: 24px; vertical-align: middle; padding: 0px 4px 0px 0px;" onerror="this.onerror=null;this.src=\''+c+"';\"/>")}),100)),!document.querySelector("#scFlagMenu")&&e.feature_flags&&R&&m.insertAdjacentHTML("afterbegin",'<img id="scFlagMenu" src="'+R+'" style="width: 15px; vertical-align: sub; padding: 0px 5px 0px 0px;" onerror="this.onerror=null;this.src=\''+c+"';\"/>"))})),chrome.storage.sync.get(["feature_rtl"],(function(e){if(null==e.feature_rtl&&(e.feature_rtl=!0),e.feature_rtl&&E){var t;if(C=E.split(" ("),R=C[0].toUpperCase(),M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",p.includes(R)){M.href=chrome.runtime.getURL("css/rtl-min.css"),t=document.getElementsByClassName("scContentControlHtml");for(let e of t)e.onload=function(){e.contentWindow.document.getElementById("ContentWrapper").style.direction="RTL"}}else{M.href=chrome.runtime.getURL("css/ltr-min.css"),t=document.getElementsByClassName("scContentControlHtml");for(let e of t)e.onload=function(){e.contentWindow.document.getElementById("ContentWrapper").style.direction="LTR"}}document.getElementsByTagName("head")[0].appendChild(M)}})),chrome.storage.sync.get(["feature_errors"],(function(e){if(null==e.feature_errors&&(e.feature_errors=!0),e.feature_errors){u=0;var t='<div id="scMessageBarError" class="scMessageBar scError"><div class="scMessageBarIcon" style="background-image:url('+s+')"></div><div class="scMessageBarTextContainer"><ul class="scMessageBarOptions" style="margin:0px">';for(let e of y){var a=e.previousSibling;if(a){var r=a.closest("div").getAttribute("id").replace("ValidationMarker",""),n=(document.querySelector("#"+r).closest("table").closest("td").closest("table").previousSibling.innerText,document.querySelector("#"+r).closest("table").closest("td").closest("table").previousSibling.getAttribute("id"));document.querySelectorAll('[data-id="'+n+'"]');"/sitecore/shell/themes/standard/images/bullet_square_yellow.png"!=e.getAttribute("src")&&(t+='<li class="scMessageBarOptionBullet" onclick="'+e.getAttribute("onclick")+'" style="cursor:pointer;">'+e.getAttribute("title")+"</li>",u++)}}t+="</ul></div></div>",u>0&&d.insertAdjacentHTML("afterend",t);var o=document.querySelector(".scValidatorPanel"),i=new MutationObserver((function(e){u=0,y=document.querySelectorAll(" .scValidationMarkerIcon ");var t='<div id="scMessageBarError" class="scMessageBar scError"><div class="scMessageBarIcon" style="background-image:url('+s+')"></div><div class="scMessageBarTextContainer"><ul class="scMessageBarOptions" style="margin:0px">';for(let e of y)"/sitecore/shell/themes/standard/images/bullet_square_yellow.png"!=e.getAttribute("src")&&(t+='<li class="scMessageBarOptionBullet" onclick="'+e.getAttribute("onclick")+'" style="cursor:pointer;">'+e.getAttribute("title")+"</li>",u++);if(t+="</ul></div></div>",u>0)d.insertAdjacentHTML("afterend",t);else{var a=document.querySelector("#scMessageBarError");a&&a.parentNode.removeChild(a)}}));if(o){i.observe(o,{attributes:!0,childList:!0,characterData:!0})}}})),chrome.storage.sync.get(["feature_charscount"],(function(e){if(null==e.feature_charscount&&(e.feature_charscount=!0),e.feature_charscount){var t,a,r=document.querySelectorAll("input, textarea"),s=0;for(var n of r)"scContentControl"==n.className||"scContentControlMemo"==n.className?(n.setAttribute("style","padding-right: 70px !important"),n.parentElement.setAttribute("style","position:relative !important"),s=n.value.length,a=s>1?s+" chars":s+" char",t='<div id="chars_'+n.id+'" style="position: absolute; bottom: 1px; right: 1px; padding: 6px 10px; border-radius: 4px; line-height: 20px; opacity:0.5;">'+a+"</div>",n.insertAdjacentHTML("afterend",t)):n.className;document.addEventListener("keyup",(function(e){"input"!=e.target.localName&&"textarea"!=e.target.localName||(s=e.target.value.length,a=s>1?s+" chars":s+" char",document.querySelector("#chars_"+e.target.id)&&(document.querySelector("#chars_"+e.target.id).innerText=a))}),!1)}})),chrome.storage.sync.get(["feature_translatemode"],(function(e){if(null==e.feature_translatemode&&(e.feature_translatemode=!0),e.feature_translatemode){var t=document.querySelector(".scEditorPanel"),a=document.querySelectorAll(".scEditorSectionPanel .scEditorSectionPanelCell")[1],r=t.querySelectorAll("input, textarea, select");if(u=0,a&&null!=a.querySelector(".scEditorFieldMarkerInputCell > table > tbody")&&(x=!0),x){for(var s of r)if("scContentControl"==s.className||"scContentControlMemo"==s.className||"scContentControlImage"==s.className||s.className.includes("scCombobox")&&!s.className.includes("scComboboxEdit")){if(g=null,u%2==0){var n=s,o=s.getAttribute("onfocus");o=(o=(o=o.split("lang="))[1].split("&"))[0].toUpperCase()}else{var l=s,c=s.getAttribute("onfocus");c=(c=(c=c.split("lang="))[1].split("&"))[0].toUpperCase();var g=s.closest("td").parentNode.querySelectorAll("td")[1];null!=g&&(g.innerHTML='<a class="scTranslateRTL" href="javascript:copyTranslate(\''+n.id+"','"+l.id+"','RTL');\" title=\"Copy "+c+" to "+o+'"><img src="'+chrome.runtime.getURL("images/navigate_left.png")+'" style="padding: 0px 2px 0px 0px; vertical-align: bottom; width: 20px;" alt="Copy"></a>')}u++}document.querySelector("#scMessageBarTranslation")||(V='<div id="scMessageBarTranslation" class="scMessageBar scInformation"><div class="scMessageBarIcon" style="background-image:url('+i+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">Translation Mode ('+c+" to "+o+')</div><div class="scMessageBarText">You are translating content. If you want, you can directly </b></div><ul class="scMessageBarOptions" style="margin:0px"><li class="scMessageBarOptionBullet"><span class="scMessageBarOption" onclick="javascript:copyTranslateAll();" style="cursor:pointer">Copy existing content into '+E+' version</span></li> or <li class="scMessageBarOptionBullet"><span class="scMessageBarOption" style="cursor:pointer !important;" onclick="window.open(\'https://translate.google.com/#view=home&op=translate&sl='+c.toLowerCase()+"&tl="+o.toLowerCase()+"&text=Hello Sitecore');\">Use Google Translate</span></li></ul></div></div>",d.insertAdjacentHTML("afterend",V))}}})),chrome.storage.sync.get(["feature_cetabs"],(function(e){if(null==e.feature_cetabs&&(e.feature_cetabs=!1),e.feature_cetabs){var t=document.querySelector("#scEditorTabs"),a=document.querySelector(".scEditorHeader"),r=document.querySelectorAll(".scMessageBar");r=r[r.length-1];var s=document.querySelectorAll(".scEditorSectionCaptionCollapsed, .scEditorSectionCaptionExpanded"),n=0;for(var o of(t&&t.remove(),t='<div id="scEditorTabs"><ul>',s)){var i=o.innerText,l=o.getAttribute("id"),c="",u="",d="";"scEditorSectionCaptionExpanded"==o.getAttribute("class")&&0==n?(c="scEditorTabSelected",u="table",n++):(c="",u="none"),o.setAttribute("style","display: none !important");var g=o.nextSibling;g.setAttribute("style","display: "+u+" !important"),g.querySelectorAll(".scEditorFieldMarkerBarCellRed").length>0&&(d="<span id='scCrossTabError'>ð </span>"),t+='<li class="scEditorTabEmpty"></li>',t+='<li data-id="'+l+'" class="scEditorTab '+c+'" onclick="toggleSection(this,\''+i+"');\">"+d+i+'<span class="scEditorTabClose" onclick="hideTab(\''+i+"','"+ye+"')\">â</span></li>"}if(t+='<li class="scEditorTabEmpty"></li></ul></div>',r?r.insertAdjacentHTML("afterend",t):a.insertAdjacentHTML("afterend",t),0==n){var m=document.querySelector(".scEditorTab"),f=m.dataset.id,p=document.querySelector("#"+f);p.classList.remove("scEditorSectionCaptionCollapsed"),p.classList.add("scEditorSectionCaptionExpanded");var h=p.nextSibling;m.classList.add("scEditorTabSelected"),h.setAttribute("style","display: table !important")}}})),chrome.storage.sync.get(["feature_messagebar"],(function(e){chrome.runtime.error||1!=e.feature_messagebar||setTimeout((function(){var e=document.querySelectorAll(".scWarning");for(var s of e){var n=s.querySelector(".scMessageBarTitle").innerText,o=s.querySelector(".scMessageBarText"),c=s.querySelector(".scMessageBarIcon"),u=n.includes("' has locked this item."),g=n.includes("Elevated Unlock"),m=n.includes("is not in the final workflow step."),f=n.includes("This item is controlled by Unicorn"),p=n.includes("The current item does not have a version"),h=n.includes("You cannot edit this item because it is protected."),v=n.includes("it has been replaced by a newer version.");if(p&&c.setAttribute("style","background-image: url("+i+");"),v&&c.setAttribute("style","background-image: url("+l+");"),m&&c.setAttribute("style","background-image: url("+a+");"),u){var y=(C=n.split("' "))[0].replace("'","");y+=" has",c.setAttribute("style","background-image: url("+t+");")}else y="You have";(g||h)&&c.setAttribute("style","background-image: url("+t+");"),f&&(s.classList.add("scOrange"),o.innerHTML=o.innerHTML.replace("<br><br>","<br>").replace("<br><b>Predicate"," <b>Predicate").replace("Changes to this item will be written to disk so they can be shared with others.<br>",""),c.setAttribute("style","background-image: url("+r+");"))}!document.querySelector(".scRibbon").innerHTML.includes("Check this item in.")||g||u||(V='<div id="scMessageBarUrl" class="scMessageBar scInformation"><div class="scMessageBarIcon" style="background-image:url('+t+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">'+y+' locked this item.</div><div class="scMessageBarText">Nobody can edit this page until you unlock it.</div><ul class="scMessageBarOptions"><li class="scMessageBarOptionBullet"><a href="#" onclick="javascript:return scForm.postEvent(this,event,\'item:checkin\')" class="scMessageBarOption">Unlock this item</a></li></ul></div></div>',d.insertAdjacentHTML("afterend",V))}),100)})),A=document.querySelector("#SearchResult"),xe=new MutationObserver((function(e){var t=document.querySelector("#SearchResult").querySelectorAll(".scSearchLink"),a=document.querySelector(".scSearchListExtra");for(var r of t){var s=r.getAttribute("title").toLowerCase();s.includes("/home/")&&(s="/"+(s=s.split("/home/"))[1]);var n=' <span class="scSearchListExtra">'+s+"</span>";s&&null==a&&(r.innerHTML+=n)}})),A&&(ke={attributes:!1,childList:!0,characterData:!1,subtree:!1},xe.observe(A,ke)),!H){var W=document.querySelectorAll("#EditorTabs > a");for(var K of W)"content"==K.innerText.toLowerCase()&&!K.classList.contains("scRibbonEditorTabActive")&&K.click()}var Y=document.querySelector("#sitecorAuthorToolboxFav"),Q="../default.aspx?xmlcontrol=Gallery.Favorites&id="+w+"&la=en&vs=1";Y&&(Y.src=Q),ue(w,j,f),clearTimeout(ie),document.querySelector("#EditorFrames").setAttribute("style","opacity:1"),document.querySelector(".scContentTreeContainer").setAttribute("style","opacity:1")};if(L&&!E&&!j&&!ee&&!N){0,T=document.createElement("script"),T.src=chrome.runtime.getURL("js/inject-min.js"),(document.head||document.documentElement).appendChild(T),T.remove(),M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/onload-min.css"),document.getElementsByTagName("head")[0].appendChild(M);var ye=chrome.runtime.getURL("something");if(ye=(ye=(ye=ye.split("chrome-extension://"))[1].split("/something"))[0],!V&&document.querySelector("body").insertAdjacentHTML("beforeend",'<input type="hidden" class="extensionId" value="'+ye+'" />'),window.Notification?"granted"===Notification.permission||Notification.requestPermission().then((function(e){"granted"===e||console.warn("User blocked notifications.")})).catch((function(e){console.warn(e)})):console.info("Browser does not support notifications."),(O||F)&&(window.onpopstate=function(e){if(e.state&&""!=e.state.id){localStorage.setItem("scBackPrevious",!0);var t='scForm.invoke("item:load(id='+e.state.id+',language=,version=1)");';T=document.createElement("script"),T.textContent=t,(document.head||document.documentElement).appendChild(T),T.remove()}},chrome.storage.sync.get(["feature_darkmode","feature_darkmode_auto"],(function(e){if(e.feature_darkmode&&e.feature_darkmode_auto){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{T=document.createElement("script"),T.textContent="scForm.invoke('contenteditor:save', event)",(document.head||document.documentElement).appendChild(T),T.remove(),setTimeout((function(){window.location.reload()}),500)})}})),se||ne||F||chrome.storage.sync.get(["scData","feature_reloadnode"],(function(e){if(null==e.feature_reloadnode&&(e.feature_reloadnode=!0),null!=e.scData){if(""!=ae)e.scItemID=ae,e.scVersion=1,e.scLanguage="",e.scSource="Hash";else{var t=e.scData;for(var a in t)t.hasOwnProperty(a)&&a==window.location.origin&&(e.scItemID=t[a].scItemID,e.scLanguage=t[a].scLanguage,e.scVersion=t[a].scVersion,e.scSource="Storage")}if(e.scItemID&&1==e.feature_reloadnode){0;var r='scForm.invoke("item:load(id='+e.scItemID+",language="+e.scLanguage+",version="+e.scVersion+')");';T=document.createElement("script"),T.textContent=r,(document.head||document.documentElement).appendChild(T),T.remove()}else ve()}else ve()})),chrome.storage.sync.get(["feature_favorites"],(function(e){if(null==e.feature_favorites&&(e.feature_favorites=!0),e.feature_favorites&&!U&&oe){var t=document.querySelector("#sitecorAuthorToolboxFav");t&&t.remove();var a='<iframe id="sitecorAuthorToolboxFav" class="sitecorAuthorToolboxFav" src="'+("../default.aspx?xmlcontrol=Gallery.Favorites&id="+he().id+"&la=en&vs=1")+'" style="width:100%; height:150px; margin-top: 0px; resize: vertical;"></iframe>';oe.insertAdjacentHTML("afterend",a)}})),F||chrome.storage.sync.get(["hideSnackbar"],(function(e){!chrome.runtime.error&&e.hideSnackbar})),chrome.storage.sync.get(["feature_workbox"],(function(e){var t,a,r;null==e.feature_workbox&&(e.feature_workbox=!0),chrome.runtime.error||1!=e.feature_workbox||(t=0,a="#checksum#",(r=new XMLHttpRequest).timeout=7e3,r.open("GET","/sitecore/shell/default.aspx?xmlcontrol=Workbox",!0),r.onreadystatechange=function(){if(4===r.readyState){if("200"==r.status){var e=(new DOMParser).parseFromString(r.responseText,"text/html"),s=e.querySelectorAll("#States > div");for(var n of s){var o=n.querySelector(".scPaneHeader").innerText;a+="-workflow:"+o.replace(" ","").toLowerCase();var i=n.querySelectorAll(".scBackground");for(var l of i){var c=l.querySelector(".scSectionCenter").innerText,u=(l.querySelectorAll(".scWorkBoxData"),c.split(" - (")[1].toLowerCase());"none"==(u=u.replace(")","").replace(" item","").replace("s",""))&&(u=0),t+=parseInt(u),a+="-state:"+c.split(" - ")[0].replace(" ","").toLowerCase()+":"+t}}var d=localStorage.getItem("wfChecksum");localStorage.setItem("wfChecksum",a),d!=a&&t>0&&ge("Workflow changes detected","Check your workbox!")}else"0"==r.status&&(t="?");F?(e='<span class="launchpadBadge">'+t+"</span>",re&&re.insertAdjacentHTML("afterbegin",e)):document.querySelectorAll(".scDockBottom > a").forEach(a=>{"Workbox"==a.innerText&&(e='<span class="wbNotification">'+t+"</span>",a.setAttribute("style","padding-right:35px"),a.insertAdjacentHTML("afterend",e))})}},setTimeout((function(){r.send(null)}),300))}))),chrome.storage.sync.get(["feature_darkmode","feature_darkmode_auto"],(function(e){null==e.feature_darkmode&&(e.feature_darkmode=!1),null==e.feature_darkmode_auto&&(e.feature_darkmode_auto=!1);var t=ce();if(e.feature_darkmode&&!e.feature_darkmode_auto&&!Q&&!D&&!I&&!H&&!P&&!j&&!E&&!J&&!$&&!q||e.feature_darkmode&&e.feature_darkmode_auto&&!Q&&!D&&!I&&!H&&!P&&!j&&!E&&!J&&!$&&!q&&"dark"==t){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/default-min.css"),document.getElementsByTagName("head")[0].appendChild(a),(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/ribbon-min.css"),
document.getElementsByTagName("head")[0].appendChild(a),(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/contentmanager-min.css"),document.getElementsByTagName("head")[0].appendChild(a),(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/dialogs-min.css"),document.getElementsByTagName("head")[0].appendChild(a),(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/gallery-min.css"),document.getElementsByTagName("head")[0].appendChild(a),(a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=chrome.runtime.getURL("css/dark/speak-min.css"),document.getElementsByTagName("head")[0].appendChild(a)}})),G&&!B?chrome.storage.sync.get(["feature_launchpad"],(function(e){if(null==e.feature_launchpad&&(e.feature_launchpad=!0),e.feature_launchpad){var t='<a href="#" class="scStartMenuLeftOption" title="" onclick="window.location.href=\''+b+"?launchpad=true&url="+h+'\'"><img src="'+_+'" class="scStartMenuLeftOptionIcon" alt="" border="0"><div class="scStartMenuLeftOptionDescription"><div class="scStartMenuLeftOptionDisplayName">Sitecore Author Toolbox</div><div class="scStartMenuLeftOptionTooltip">Options</div></div></a>',a=document.querySelectorAll(".scStartMenuLeftOption");for(let e of a)"Install and maintain apps."==e.getAttribute("title")&&e.insertAdjacentHTML("afterend",t)}})):F&&chrome.storage.sync.get(["feature_launchpad"],(function(e){if(null==e.feature_launchpad&&(e.feature_launchpad=!0),e.feature_launchpad){var t=document.querySelectorAll(".last"),a='<div class="sc-launchpad-group"><header class="sc-launchpad-group-title">Sitecore Author Toolbox</header><div class="sc-launchpad-group-row"><a href="#" onclick="window.location.href=\''+b+"?launchpad=true&url="+h+'\'" class="sc-launchpad-item" title="Options"><span class="icon"><img src="'+_+'" width="48" height="48" alt="Options"></span><span class="sc-launchpad-text">Options</span></a></div></div>';t[0].insertAdjacentHTML("afterend",a)}})),B)0;else if(Y)0;else if(te)A=document.querySelector("#results"),xe=new MutationObserver((function(e){var t=document.querySelector("#results").querySelectorAll(".BlogPostArea");for(var a of t){var r=a.querySelector(".BlogPostFooter"),s=a.querySelector(".BlogPostViews > a > img").getAttribute("title");(s=(s=s.split(" - "))[1].toLowerCase()).includes("/home/")&&(s="/"+(s=s.split("/home/"))[1]);var n='<div class="BlogPostExtra BlogPostContent" style="padding: 5px 0 0px 78px; color: #0769d6"><strong>Sitecore path:</strong> '+s+" <strong>Languages available:</strong> "+a.querySelector(".BlogPostHeader > span").getAttribute("title")+"</div>";s&&r.insertAdjacentHTML("afterend",n)}})),A&&(ke={attributes:!1,childList:!0,characterData:!1,subtree:!1},xe.observe(A,ke));else if(K){0,chrome.storage.sync.get(["feature_charscount"],(function(e){if(null==e.feature_charscount&&(e.feature_charscount=!0),e.feature_charscount){var t,a,r=document.querySelectorAll("input, textarea"),s=0;for(var n of r)"scContentControl"!=n.className&&"scContentControlMemo"!=n.className||(n.setAttribute("style","padding-right: 70px !important"),n.parentElement.setAttribute("style","position:relative !important"),s=n.value.length,a=s>1?s+" chars":s+" char",t='<div id="chars_'+n.id+'" style="position: absolute; bottom: 1px; right: 1px; padding: 6px 10px; border-radius: 4px; line-height: 20px; opacity:0.5;">'+a+"</div>",n.insertAdjacentHTML("afterend",t));document.addEventListener("keyup",(function(e){"input"!=e.target.localName&&"textarea"!=e.target.localName||(s=e.target.value.length,a=s>1?s+" chars":s+" char",document.querySelector("#chars_"+e.target.id)&&(document.querySelector("#chars_"+e.target.id).innerText=a))}),!1)}}));var be=document.querySelectorAll(".scBucketListSelectedBox, .scContentControlMultilistBox"),_e=document.querySelector("#Section_Data");(be=be[1]?be[1]:be[0])&&be.addEventListener("change",(function(){var e=be.value,t=be[be.selectedIndex].text,a=chrome.runtime.getURL("images/rocket.png"),r='<a class="scMessageBarOption" href="'+window.location.origin+"/sitecore/shell/Applications/Content%20Editor.aspx#"+e+'" target="_blank"><u>Click here â§</u></a> ',s='<a class="scMessageBarOption" href="'+window.location.origin+"/?sc_mode=edit&sc_itemid="+e+'" target="_blank"><u>Click here â§</u></a> ',n='<div id="Warnings" class="scMessageBar scWarning"><div class="scMessageBarIcon" style="background-image:url('+a+')"></div><div class="scMessageBarTextContainer"><div class="scMessageBarTitle">'+t+'</div><span id="Information" class="scMessageBarText"><span class="scMessageBarOptionBullet">'+r+'</span> to edit this item in <b>Content Editor</b>.</span><span id="Information" class="scMessageBarText"><br /><span class="scMessageBarOptionBulletXP">'+s+"</span> to edit this page in <b>Experience Editor</b>.</span></div></div>";document.querySelector(".scMessageBar")?(document.querySelector(".scMessageBarTitle").innerHTML=t,document.querySelector(".scMessageBarOptionBullet").innerHTML=r,document.querySelector(".scMessageBarOptionBulletXP").innerHTML=s):_e.insertAdjacentHTML("beforebegin",n)})),chrome.storage.sync.get(["feature_errors"],(function(e){null==e.feature_errors&&(e.feature_errors=!0);var t=0,a=document.getElementsByClassName("scValidationMarkerIcon"),r=document.querySelector("#MainPanel"),s=chrome.runtime.getURL("images/error.png");if(e.feature_errors){var n='<div id="scMessageBarError" class="scMessageBar scError"><div class="scMessageBarIcon" style="background-image:url('+s+')"></div><div class="scMessageBarTextContainer"><ul class="scMessageBarOptions" style="margin:0px">';for(let e of a)"/sitecore/shell/themes/standard/images/bullet_square_yellow.png"!=e.getAttribute("src")&&(n+='<li class="scMessageBarOptionBullet" onclick="'+e.getAttribute("onclick")+'" style="cursor:pointer;">'+e.getAttribute("title")+"</li>",t++);n+="</ul></div></div>",t>0&&r.insertAdjacentHTML("beforebegin",n);var o=document.querySelector(".scValidatorPanel"),i=new MutationObserver((function(e){t=0;var n='<div id="scMessageBarError" class="scMessageBar scError"><div class="scMessageBarIcon" style="background-image:url('+s+')"></div><div class="scMessageBarTextContainer"><ul class="scMessageBarOptions" style="margin:0px">';for(let e of a)"/sitecore/shell/themes/standard/images/bullet_square_yellow.png"!=e.getAttribute("src")&&(console.log(e),n+='<li class="scMessageBarOptionBullet" onclick="'+e.getAttribute("onclick")+'" style="cursor:pointer;">'+e.getAttribute("title")+"</li>",t++);if(n+="</ul></div></div>",t>0)r.insertAdjacentHTML("beforebegin",n);else{var o=document.getElementById("scMessageBarError");o&&o.parentNode.removeChild(o)}}));if(o){i.observe(o,{attributes:!0,childList:!0,characterData:!0})}}}))}else R?(console.info("%c **** Media Folder **** ","font-size:14px; background: #f16100; color: black; border-radius:5px; padding 3px;"),chrome.storage.sync.get(["feature_dragdrop"],(function(e){if(null==e.feature_dragdrop&&(e.feature_dragdrop=!0),e.feature_dragdrop){var t=window.location.href.split("id=%7B"),a=(t=(t=t[1].split("%7B"))[0].split("%7D"))[0],r="/sitecore/client/Applications/Dialogs/UploadMediaDialog?ref=list&ro=sitecore://master/%7b"+a+"%7d%3flang%3den&fo=sitecore://master/%7b"+a+"%7d",s=document.querySelector(".scFolderButtons"),n='<a href="#" class="scButton" onclick="javascript:scSitecore.prototype.showModalDialog(\''+r+"', '', '', null, null); false\"><img src=\" "+_+' " width="16" height="16" class="scIcon" alt="" border="0"><div class="scHeader">Upload files (Drag and Drop)</div></a>';s.insertAdjacentHTML("afterbegin",n)}}))):V||W?chrome.storage.sync.get(["feature_rtecolor","feature_darkmode","feature_darkmode_auto"],(function(e){if(null==e.feature_rtecolor&&(e.feature_rtecolor=!0),null==e.feature_darkmode&&(e.feature_darkmode=!1),null==e.feature_darkmode_auto&&(e.feature_darkmode_auto=!1),e.feature_rtecolor){var t,a="default";if(V?t=document.querySelector("#Editor_contentIframe"):W&&(t=document.querySelector("#ctl00_ctl00_ctl05_Html")),t){if(V){document.querySelector("#Editor_contentIframe").contentWindow.document.body,document.querySelector("#EditorContentHiddenTextarea");var r=document.querySelector(".reTextArea")}M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/codemirror.css"),document.getElementsByTagName("head")[0].appendChild(M);var s=ce();(e.feature_darkmode&&!e.feature_darkmode_auto||e.feature_darkmode&&e.feature_darkmode_auto&&"dark"==s)&&(a="ayu-dark",M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/dark/ayu-dark.css"),document.getElementsByTagName("head")[0].appendChild(M)),V?(r.insertAdjacentHTML("afterend",'<input type="hidden" class="scDarkMode" value="'+a+'" />'),r.insertAdjacentHTML("afterend",'<input type="hidden" class="scEditor" value="richTextEditor" />')):W&&(t.insertAdjacentHTML("afterend",'<input type="hidden" class="scDarkMode" value="'+a+'" />'),t.insertAdjacentHTML("afterend",'<input type="hidden" class="scEditor" value="htmlEditor" />')),T=document.createElement("script"),T.src=chrome.runtime.getURL("js/bundle-min.js"),(document.head||document.documentElement).appendChild(T),T.remove()}}})):C?chrome.storage.sync.get(["feature_flags"],(function(e){if(null==e.feature_flags&&(e.feature_flags=!0),e.feature_flags){var t,a,r,s,n=document.querySelector("#Languages"),o=n.querySelectorAll(".scMenuPanelItem,.scMenuPanelItemSelected"),i=0;(o=[].slice.call(o).sort((function(e,t){return e.querySelector("table > tbody > tr > td > div > div:last-child").textContent>t.querySelector("table > tbody > tr > td > div > div:last-child").textContent?-1:1}))).forEach((function(e){n.appendChild(e)}));for(let e of o){i=0,t=e.getElementsByTagName("td");for(let e of t){if(0==i)r=e.getElementsByTagName("img");else{if(a=(a=e.getElementsByTagName("b"))[0].innerHTML,"0"!=e.getElementsByTagName("div")[2].innerHTML.split(" ")[0]&&e.getElementsByTagName("div")[2].setAttribute("style","background-color: yellow; display: initial; padding: 0px 3px; color: #000000 !important"),a.includes("(region)"))for(s in a=a.split(" (region"),le)le.hasOwnProperty(s)&&a[0].toUpperCase()==le[s].language.toUpperCase()&&(a=le[s].flag);else a=pe(a);a=a.toLowerCase(),r[0].onerror=function(){this.src=chrome.runtime.getURL("images/Flags/32x32/flag_generic.png")},r[0].src=chrome.runtime.getURL("images/Flags/32x32/flag_"+a+".png")}i++}0}}})):U&&chrome.storage.sync.get(["feature_flags"],(function(e){if(null==e.feature_flags&&(e.feature_flags=!0),e.feature_flags){var t,a,r,s,n=document.querySelector("#Languages").getElementsByTagName("label");for(let e of n){for(r in t=e.innerText,a=pe(t),le)le.hasOwnProperty(r)&&a==le[r].language.toUpperCase()&&(a=le[r].flag);s=a.toLowerCase(),s=chrome.runtime.getURL("images/Flags/16x16/flag_"+s+".png"),e.insertAdjacentHTML("beforebegin",' <img id="scFlag" src="'+s+'" style="display: inline; vertical-align: middle; padding-right: 2px;" onerror="this.onerror=null;this.src=\'-/icon/Flags/16x16/flag_generic.png\';"/>')}}}));chrome.storage.sync.get(["feature_autoexpand"],(function(e){null==e.feature_autoexpand&&(e.feature_autoexpand=!0),e.feature_autoexpand&&(document.addEventListener("click",(function(e){if(null!=e.target.offsetParent&&e.target.offsetParent.matches(".scContentTreeNodeNormal")&&(document.querySelector("#EditorFrames").setAttribute("style","opacity:0.6"),document.querySelector(".scContentTreeContainer").setAttribute("style","opacity:0.6"),document.querySelector(".scEditorTabHeaderActive > span").innerText="Loading...",ie=setTimeout((function(){document.querySelector("#EditorFrames").setAttribute("style","opacity:1"),document.querySelector(".scContentTreeContainer").setAttribute("style","opacity:1")}),8e3)),!e.target.matches(".scContentTreeNodeGlyph"))return;let t=e.target.id;setTimeout((function(){if(document&&t){let e=document.querySelector("#"+t).nextSibling.nextSibling.nextSibling;if(e){let t=e.querySelectorAll(".scContentTreeNode");1==t.length&&t[0].querySelector(".scContentTreeNodeGlyph").click()}}}),200)}),!1),document.addEventListener("mousedown",(function(e){if(!e.target.matches(".glyph"))return;let t=e.target.id,a=e.target.src.includes("collapsed");setTimeout((function(){if(document&&t&&a){var e=document.querySelector("#"+t).closest("ul").nextSibling;if(e)e.querySelector(".glyph").click()}}),200)}),!1))})),A=document.querySelector("#LastPage"),xe=new MutationObserver((function(e){chrome.storage.sync.get(["feature_notification"],(function(e){if(null==e.feature_notification&&(e.feature_notification=!0),e.feature_notification){A=document.querySelector("#LastPage");var t=A.querySelector(".sc-text-largevalue").innerHTML,a=A.querySelector(".scFieldLabel").innerHTML;"Result:"==a&&(a="Finished "+document.querySelector("#ResultText").value.split("Finished")[1]),ge(t,a);var r=parent.parent.document.querySelector("body");de(r)}}))})),A&&xe.observe(A,{attributes:!0}),A=document.querySelector("#scLanguage");var xe=new MutationObserver((function(e){var t=document.querySelector(".scEditorHeaderQuickInfoInput");if(t){var a=t.getAttribute("value"),r=(document.querySelector("#scLanguage").getAttribute("value").toLowerCase(),document.querySelectorAll(".scEditorQuickInfo")),s=(r[r.length-1],r.length),n=document.getElementsByClassName("scEditorHeaderTitle"),o=document.querySelectorAll(".scEditorHeaderQuickInfoInput"),i=o[o.length-2].getAttribute("value"),l=localStorage.getItem("scBackPrevious");if(!se&&!ne)if("true"!=l){var c={sitecore:!0,id:a};history.pushState(c,void 0,"#"+a)}else localStorage.removeItem("scBackPrevious");if(s>1&&!document.getElementById("showInContentTree"+s)){var u=window.location.href,d=(u=u.split("#"))[0]+"&reload#"+i;n[s-1].insertAdjacentHTML("afterend",'[<a id="showInContentTree'+s+'" href="" onclick="javascript:window.location.href=\''+d+"'; return false;\" />Show in content tree</a>]")}}e.forEach((function(e){"attributes"==e.type&&ve()}))}));A&&xe.observe(A,{attributes:!0})}if(E&&!j||k&&!j){0,M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/onload-min.css"),document.getElementsByTagName("head")[0].appendChild(M),M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/reset-min.css"),document.getElementsByTagName("head")[0].appendChild(M),M=document.createElement("link"),M.type="text/css",M.rel="stylesheet",M.href=chrome.runtime.getURL("css/tooltip-min.css"),document.getElementsByTagName("head")[0].appendChild(M),T=document.createElement("script"),T.src=chrome.runtime.getURL("js/inject-min.js"),(document.head||document.documentElement).appendChild(T),T.remove();var Se=document.querySelector("[data-sc-itemid]");if(Se){var Ae=decodeURI(Se.getAttribute("data-sc-itemid"));ue(Ae,"en",1)}if(w&&chrome.storage.sync.get(["feature_flags"],(function(e){if(null==e.feature_flags&&(e.feature_flags=!0),e.feature_flags){var t,a,r,s,n=document.querySelector(".sc-gallery-content"),o=n.querySelectorAll(".sc-gallery-option-content,.sc-gallery-option-content-active");(o=[].slice.call(o).sort((function(e,t){return e.querySelector("div > div:last-child > span").textContent>t.querySelector("div > div:last-child > span").textContent?-1:1}))).forEach((function(e){n.appendChild(e)}));for(let e of o){for(s in t=e.closest(".sc-gallery-option-content,.sc-gallery-option-content-active"),a=e.querySelector(".sc-gallery-option-content-header > span").innerText,"0"!=(r=e.querySelector(".sc-gallery-option-content-description > span")).innerHTML.split(" ")[0]&&r.setAttribute("style","background-color: yellow; display: initial; padding: 0px 3px; color: #000000 !important"),a=pe(a),le)le.hasOwnProperty(s)&&a==le[s].language.toUpperCase()&&(a=le[s].flag);t.setAttribute("style","padding-left:48px; background-image: url("+chrome.runtime.getURL("images/Flags/32x32/flag_"+a+".png")+"); background-repeat: no-repeat; background-position: 5px;")}}})),z){0;var Te,Me,Le=document.querySelector(".flag_generic_24");for(Me in Te=Le.nextSibling.innerText,Te=pe(Te),le)le.hasOwnProperty(Me)&&Te==le[Me].language.toUpperCase()&&(Te=le[Me].flag);Le.setAttribute("style","background-image: url("+chrome.runtime.getURL("images/Flags/24x24/flag_"+Te+".png")+"); background-repeat: no-repeat; background-position: top left;")}if(A=document.querySelector(".scChromeControls"),xe=new MutationObserver((function(e){var t=document.querySelectorAll(".scChromeToolbar");for(var a of t){a.setAttribute("style","margin-left:50px");var r=a.querySelectorAll(".scChromeCommand");a.querySelector(".scChromeText"),a.querySelector(".scChromeCommandText");for(var s of r){var n=s.getAttribute("title");s.setAttribute("style","z-index:auto"),null!=n&&(s.setAttribute("data-tooltip",n),s.classList.add("t-bottom"),s.classList.add("t-sm"),s.removeAttribute("title"))}}})),A){var ke={attributes:!0,childList:!0,characterData:!0};xe.observe(A,ke)}var Ee=ce();chrome.storage.sync.get(["feature_darkmode","feature_darkmode_auto","feature_toggleribbon"],(function(e){var t=document.querySelector(".pagemode-edit");t||(t=document.querySelector(".on-page-editor")),t||(t=document.querySelector(".experience-editor"));h.includes("?");var a=h.includes("sc_mode=edit"),r=h.includes("sc_mode=preview");document.querySelector("#scCrossPiece"),document.querySelector("#scWebEditRibbon"),document.querySelector(".sc-messageBar");let s;if(null==e.feature_darkmode&&(e.feature_darkmode=!1),null==e.feature_darkmode_auto&&(e.feature_darkmode_auto=!1),null==e.feature_toggleribbon&&(e.feature_toggleribbon=!0),e.feature_darkmode&&!e.feature_darkmode_auto&&z||e.feature_darkmode&&!e.feature_darkmode_auto&&X||e.feature_darkmode&&!e.feature_darkmode_auto&&Z||e.feature_darkmode&&e.feature_darkmode_auto&&z&&"dark"==Ee||e.feature_darkmode&&e.feature_darkmode_auto&&X&&"dark"==Ee||e.feature_darkmode&&e.feature_darkmode_auto&&Z&&"dark"==Ee){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=chrome.runtime.getURL("css/dark/experience-min.css"),document.getElementsByTagName("head")[0].appendChild(n)}(e.feature_darkmode&&!e.feature_darkmode_auto||e.feature_darkmode&&e.feature_darkmode_auto&&"dark"==Ee)&&(s="dark");var o,i=document.body,l=new MutationObserver((function(e){for(var t of e)for(var a of t.addedNodes)if("scCrossPiece"==a.id){var r='<div class="scExpTab '+s+'"><span class="tabHandle"></span><span class="tabText" onclick="toggleRibbon()">â² Hide<span></div>';a.insertAdjacentHTML("afterend",r),l.disconnect(),fe()}}));if(e.feature_toggleribbon&&i){l.observe(i,{attributes:!1,childList:!0,characterData:!1})}if(o=a?h.replace("sc_mode=edit","sc_mode=normal"):r?h.replace("sc_mode=preview","sc_mode=normal"):h.includes("?")?h+"&sc_mode=normal":h+"?sc_mode=normal",e.feature_toggleribbon&&!z){var c='<div class="scNormalModeTab '+s+'"><span class="t-right t-sm" data-tooltip="Open in Normal Mode"><a href="'+o+'"><img src="'+m+'"/></a></span></div>';t&&t.insertAdjacentHTML("afterend",c)}e.feature_toggleribbon&&!z&&(c='<div class="scContentEditorTab '+s+'"><span class="t-right t-sm" data-tooltip="Open in Content Editor"><a href="'+window.location.origin+'/sitecore/shell/Applications/Content%20Editor.aspx?sc_bw=1"><img src="'+f+'"/></a></span></div>',t&&t.insertAdjacentHTML("afterend",c))}))}